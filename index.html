<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta name="apple-mobile-web-app-title" content="H&T Wedding">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>Hannah &amp; Tom</title>
    <link rel="stylesheet" type="text/css" href="css/jquery.fullPage.css" />
    <link rel="stylesheet" type="text/css" href="css/wedding.css" />
    <link href="https://fonts.googleapis.com/css?family=Amatic+SC" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Old+Standard+TT" rel="stylesheet">
    <link rel="stylesheet" href="css/animate.css">
    <script src="js/jquery-1.12.4.min.js"></script>
    <script type="text/javascript" src="js/jquery.fullPage.min.js "></script>
    <script type="text/javascript">
        $(document).ready(function () {
            $('#fullpage').fullpage({
                sectionsColor: ['#f2f2f2'],
                slidesNavigation: true
            });
        });
    </script>
</head>

<body>
    <div id="fullpage">
        <div class="section">
            <div class="large inline-flex">
                <div id="hannah">Hannah</div>
                <div id="andTom">&nbsp;&amp; Tom's Wedding</div>
                <div id="henDo" class="hidden">Hen Do</div>
            </div>
            <div id="date" class="medium">14
                <sup>th</sup> July 2018</div>
            <div class="small">Type the code from your invitation and click "Enter"</div>
            <form class="code" onsubmit="event.preventDefault(); whichCode();">
                <input type="text" id="code" class="text-field" autofocus  autocomplete="off" size="8"></input>
                <input type="submit" value="Enter">
                <div class="error" id="error">That didn't work - try typing the code again!</div>
            </form>
        </div>
    </div>
    <script type="text/javascript">
        var whichCode = function () {
            var code = document.getElementById("code").value.toString().toLowerCase().trim().hashCode();
            var animationEnd = (function (el) {
                var animations = {
                    animation: 'animationend',
                    OAnimation: 'oAnimationEnd',
                    MozAnimation: 'mozAnimationEnd',
                    WebkitAnimation: 'webkitAnimationEnd',
                };

                for (var t in animations) {
                    if (el.style[t] !== undefined) {
                        return animations[t];
                    }
                }
            })(document.createElement('div'));
            var animation = function (url) {
                $("#andTom").addClass("animated hinge").one(animationEnd, function () {
                    $("#andTom").remove();
                    $("#hannah").html("Hannah's&nbsp;").addClass("animated slideInLeft");
                    $("#henDo").removeClass("hidden").addClass("animated slideInRight");
                    $("#date").html("11<sup>th</sup> - 13<sup>th</sup> May 2018").addClass("animated shake");
                    setTimeout(function () {
                        window.location.href = url;
                    }, 2000)
                });
            }
            switch (code) {
                case -807124393:
                    window.location.href = "./wedding";
                    break;
                case -1546891729:
                    window.location.href = "./evening";
                    break;
                case -728932818:
                    animation("./sh");
                    break;
                case 97:
                    animation("./z");
                    break;
                case 98:
                    animation("./x");
                    break;
                case 99:
                    animation("./t");
                    break;
                default:
                    $("#error").show();
                    break;
            }
        };

        String.prototype.hashCode = function () {
            var hash = 0,
                i, chr;
            if (this.length === 0) return hash;
            for (i = 0; i < this.length; i++) {
                chr = this.charCodeAt(i);
                hash = ((hash << 5) - hash) + chr;
                hash |= 0; // Convert to 32bit integer
            }
            return hash;
        };
    </script>
</body>

</html>